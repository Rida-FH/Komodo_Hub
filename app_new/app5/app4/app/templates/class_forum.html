{% extends 'base2.html' %}

{% block title %}Teacher Forum{% endblock %}

{% block content %}
<div style="display: flex; gap: 20px; margin-top: 30px;">
    <!-- Sidebar con clases -->
    <aside style="width: 200px; background: #f7f7f7; padding: 20px; border-radius: 8px;">
        <h3>Classes</h3>
        <nav>
            {% for class_name in classes %}
                <div style="margin-bottom: 10px;">
                    <a href="{{ url_for('class_forum', class_name=class_name) }}"
                       style="text-decoration: none; color: {% if class_name == current_class %}#4CAF50{% else %}#333{% endif %}; font-weight: {% if class_name == current_class %}bold{% else %}normal{% endif %};">
                        {{ class_name }}
                    </a>
                </div>
            {% endfor %}
        </nav>
    </aside>

    <!-- Forum -->
    <section style="flex: 1;">
        <h2>Forum - {{ current_class }}</h2>

        <form method="POST" enctype="multipart/form-data" style="margin-bottom: 20px;">
            <textarea name="message" rows="4" style="width: 100%; padding: 10px;" placeholder="Write your message..." required></textarea><br><br>
            <input type="file" name="image"><br><br>
            <button type="submit" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px;">Post</button>
        </form>

        {% for msg in forum_messages %}
        <div style="background: #fff; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1);">
            <strong>{{ msg.username }}</strong><br>
            <p>{{ msg.text }}</p>
            {% if msg.image_filename %}
                <img src="{{ url_for('static', filename=msg.image_filename) }}" style="max-width: 200px; margin-top: 10px;">
            {% endif %}
            <div style="font-size: 12px; color: gray;">{{ msg.timestamp }}</div>
        </div>
        {% endfor %}
    </section>
</div>
{% endblock %}
